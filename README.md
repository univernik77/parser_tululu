# Набор скриптов для получения фотографий с запусков SpaceX, фотографии дня и фотографии Земли от NASA, с возможностью выборочного или автоматического постинга в Телеграм-канал.


Данный набор скриптов состоит из 5 основных и 1 вспомогательный.  

Основные:  

* `fetch_spacex_images.py` загрузка фотографии с запусков SpaceX. `
* `fetch_nasa_apod.py` загрузка лучших астрономических фотографии дня от NASA. 
* `fetch_nasa_epic.py` загрузка фотографий земли от NASA. 
* `one_post_space_telegram_bot.py` публикация одной фотографии в Телеграм канал.
* `autopost_space_telegram_bot.py` автоматическая публикация в Телеграм канал.
  
Вспомогательный:

* `support_util.py` обслуживание скриптов `fetch_spacex_images.py`, `fetch_nasa_apod.py`, `fetch_nasa_epic.py`

## Запуск  

**Важно.** Для запуска скриптов вам потребуется ключ API. Он доступен после регистрации на сайте [https://api.nasa.gov/#apod](https://api.nasa.gov/#apod).  

**Важно.** Для запуска скриптов для публикации фотографии вам потребуется Телеграм-бот, Телеграм-канал и токен для доступа к Телеграмм-боту. Инструкция, как зарегистрировать Телеграм-бота, создать Телеграм-канал и получить токен [https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/](https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/). 

Для запуска скриптов у вас уже должен быть установлен Python 3.

- Скачайте код
- Основной и вспомогательные скрипты должны лежать в одной папке.
- Установите зависимости командой  
  ```python
  pip install -r requirements.txt
  ```
- Запустите скрипт командой  
  ```python
  python3 ...
  ```

## Переменные окружения

Часть настроек проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` рядом с файлом скрипта и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны 3 переменные:
- `NASA_API_KEY ` — ключ для доступа к скачиванию фотографии от NASA
- `TELEGRAM_TOKEN ` — токен для доступа к вашему Телеграм каналу.
- `PATH_TO_IMAGE` — папка, где будут храниться скаченные файлы, по умолчанию 'images'.
- `TG_CHAT_ID` - название Телеграм-канал

## Описание основных скриптов


### Загрузка фотографий с запуска SpaceX `fetch_spacex_images.py`  

Запускается с аргументом: id запуска. Создает папку, в случае если ее не существует и сохраняет, полученные фотографии в нее. 

![Снимок экрана от 2023-11-04 16-34-03](https://github.com/univernik77/TelegramChannel/assets/146747152/1b9bf75d-bf21-4682-a3e5-de2e01b1da54)



В случае, если для данного запуска не было фотографии, загружаются фотографии с последнего запуска, где они были сделаны. Результат выполения скрипта:  

![Result spacex](https://github.com/univernik77/TelegramChannel/assets/146747152/f8a19b88-0c45-41f7-b2b7-d1e380e7f7c4)



### Загрузка лучших астрономических фотографий дня `fetch_nasa_apod.py`  

Запускается с аргументом: требуемое количество фотографий. Создает папку, в случае если ее не существует и сохраняет, полученные фотографии в нее.

!![Launch apod](https://github.com/univernik77/TelegramChannel/assets/146747152/ba2a023c-5f49-43d6-9fdd-49846a56f3e7)


Если аргумент не указан, загружает по умолчанию 30 фотографий. Пример полученного результата, выполнения скрипта:

![Result apod](https://github.com/univernik77/TelegramChannel/assets/146747152/a2564468-f22b-42c6-acc0-efc4750e6d04)


### Загрузка фотографий Земли `fetch_nasa_epic.py`  

Запускается с аргументом: требуемое количество фотографий. Создает папку, в случае если ее не существует и сохраняет, полученные фотографии в нее.

![Запуск epic](https://github.com/univernik77/TelegramChannel/assets/146747152/24a6076a-db2d-49dd-b32c-11bc024bae01)


Если аргумент не указан, загружает по умолчанию 10 фотографий. Пример выполнения скрипта:

![Result epic](https://github.com/univernik77/TelegramChannel/assets/146747152/c66e5df8-1db4-4802-8435-a32e8b7dd72c)
 

### Публикация одной фотографии в Телеграм-канал `one_post_space_telegram_bot.py`  

Запускается с аргументом: путь к файлу. Публикует с помощью бота, выбранную фотографию в Телеграм-канал.

![Launch one post](https://github.com/univernik77/TelegramChannel/assets/146747152/5362970a-9003-4e31-83db-45575f0ecd5d)


Если аргумент не указан, выводит на экран предупреждение. Пример выполнения скрипта:

![Result one post](https://github.com/univernik77/TelegramChannel/assets/146747152/c14fa7ae-1ded-41c8-9dcd-80debc3248c3)


### Автоматическая публикация фотографий в Телеграм-канал `one_post_space_telegram_bot.py`  

Запускается с аргументом: интервал публикаций в секундах. Публикует с помощью бота фотографии в Телеграм-канал.

![Launch auto](https://github.com/univernik77/TelegramChannel/assets/146747152/c4a17734-d6c0-4372-b8ab-c99557545c61)


Если аргумент не указан, интервал по умолчанию 4 часа. Если фотографии в папке закончились, перемешивает их произвольном порядке и публикует заново. Пример выполнения скрипта:

![Result auto](https://github.com/univernik77/TelegramChannel/assets/146747152/3d2eb28c-6e32-40f3-8ef1-6c1718b78467)  

Завершение работы скрипта `Ctrl+C`.

## Описание вспомогательных скриптов  

### `support_util.py`

Открывает и читает файл для дальнейшей обработки. Возвращает изначальное расширение файла. Оправляет запрос к API.

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
